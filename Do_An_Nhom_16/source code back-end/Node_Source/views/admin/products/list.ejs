<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản Lý Món Ăn</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <%- include('../partials/header', { page: 'products' }) %>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2>Danh Sách Món Ăn</h2>
            <a href="/admin/products/add" style="background: #283618; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-weight: 600;">
                <i class="fas fa-plus"></i> Thêm Món Mới
            </a>
        </div>

        <table class="table-custom">
            <thead>
                <tr>
                    <th style="width: 50px;">ID</th>
                    <th style="width: 100px;">Ảnh</th>
                    <th>Tên Món</th>
                    <th>Danh Mục</th>
                    <th>Giá</th>
                    <th>Nổi Bật</th>
                    <th style="width: 150px;">Hành Động</th>
                </tr>
            </thead>
            <tbody>
                <% if (products && products.length > 0) { %>
                    <% products.forEach(item => { %>
                        <tr>
                            <td>#<%= item.id %></td>
                            <td>
                                <img src="<%= item.image_url %>" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;" onerror="this.src='/img/placeholder/product-default.jpg'">
                            </td>
                            <td style="font-weight: 600;"><%= item.name %></td>
                            <td>
                                <% if(item.category_id == 1) { %> Cà Phê <% } 
                                   else if(item.category_id == 2) { %> Trà <% } 
                                   else if(item.category_id == 3) { %> Freeze <% } 
                                   else { %> Bánh <% } %>
                            </td>
                            <td style="color: #936639; font-weight: bold;"><%= item.price.toLocaleString('vi-VN') %> đ</td>
                            <td>
                                <% if(item.is_featured) { %>
                                    <span style="color: green; font-size: 0.8rem;"><i class="fas fa-check-circle"></i> Có</span>
                                <% } %>
                            </td>
                            <td>
                                <a href="/admin/products/delete/<%= item.id %>" class="btn-delete btn-sm" onclick="return confirm('Bạn có chắc muốn xóa món này?');">
                                    <i class="fas fa-trash"></i> Xóa
                                </a>
                            </td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr><td colspan="7" class="text-center">Chưa có dữ liệu</td></tr>
                <% } %>
            </tbody>
        </table>
    </div>
</body>
</html>