<!DOCTYPE html>
<html lang="vi">
<head>
    <title>Duyệt Bình Luận</title>
</head>
<body>
    <%- include('../partials/header', { page: 'comments' }) %>
    <div class="container">
        <div class="card">
            <h2><i class="fas fa-comments"></i> Kiểm Duyệt Bình Luận</h2>
            <table class="table-custom">
                <thead>
                    <tr>
                        <th width="20%">Bài viết</th>
                        <th width="15%">Người gửi</th>
                        <th width="35%">Nội dung</th>
                        <th width="10%">Trạng thái</th>
                        <th width="20%">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (comments && comments.length > 0) { %>
                        <% comments.forEach(c => { %>
                            <tr>
                                <td><small>Bài ID: <%= c.post_id %></small></td>
                                <td><strong><%= c.author_name %></strong></td>
                                <td><%= c.content %></td>
                                <td>
                                    <% if(c.status == 'pending') { %> 
                                        <span style="color: #e67e22; font-weight: bold;"><i class="fas fa-clock"></i> Chờ</span> 
                                    <% } else { %> 
                                        <span style="color: #2a9d8f; font-weight: bold;"><i class="fas fa-check"></i> Đã hiện</span> 
                                    <% } %>
                                </td>
                                <td>
                                    <% if(c.status == 'pending') { %>
                                        <a href="/admin/comments/approve/<%= c.id %>" class="btn-sm btn-success">Duyệt</a>
                                    <% } %>
                                    <a href="/admin/comments/delete/<%= c.id %>" class="btn-sm btn-delete" onclick="return confirm('Xóa vĩnh viễn?');">Xóa</a>
                                </td>
                            </tr>
                        <% }) %>
                    <% } else { %>
                        <tr><td colspan="5" class="text-center">Sạch sẽ! Không có bình luận nào.</td></tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
    <script src="/js/admin.js"></script>
</body>
</html>