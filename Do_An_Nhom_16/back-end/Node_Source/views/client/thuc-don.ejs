<!DOCTYPE html>
<html lang="vi">
<head>
    <%- include('../partials/head', { title: 'Thực Đơn - Catfe Coffee' }) %>
    
    <style>
        /* Page Header - Glass Hero */
        .page-header {
            position: relative;
            padding: 80px 0;
            margin-bottom: 50px;
            overflow: hidden;
            
            /* Background image with overlay */
            background: 
                linear-gradient(
                    135deg,
                    rgba(40, 54, 24, 0.7) 0%,
                    rgba(147, 102, 57, 0.6) 100%
                ),
                url('https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=1920&h=400&fit=crop') center/cover;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            inset: 0;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
        }
        
        .page-header .container {
            position: relative;
            z-index: 1;
        }
        
        .page-title {
            font-size: 3rem;
            font-weight: 800;
            text-transform: uppercase;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            letter-spacing: 2px;
        }
        
        .page-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        /* Menu Filter Tabs - Floating Glass Pills */
        .menu-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 50px;
            padding: 20px;
            
            /* Glass container */
            background: rgba(254, 250, 240, 0.25);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 60px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(40, 54, 24, 0.15),
                        inset 0 1px 0 0 rgba(255, 255, 255, 0.3);
            
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .tab-link {
            padding: 12px 28px;
            border-radius: 50px;
            color: rgba(40, 54, 24, 0.85);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 0.5px;
            
            /* Default state - transparent */
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(40, 54, 24, 0.15);
            
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-link:hover {
            background: rgba(163, 197, 151, 0.3);
            border-color: rgba(163, 197, 151, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 54, 24, 0.2);
        }
        
        .tab-link.active {
            background: rgba(40, 54, 24, 0.85);
            backdrop-filter: blur(10px);
            color: white;
            border-color: rgba(40, 54, 24, 0.9);
            box-shadow: 0 6px 20px rgba(40, 54, 24, 0.3),
                        inset 0 1px 0 0 rgba(255, 255, 255, 0.2);
        }
        
        .tab-link.active:hover {
            background: rgba(40, 54, 24, 0.95);
            transform: translateY(-3px);
        }
        
        /* Empty State - Glass Card */
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            border-radius: 24px;
            
            background: rgba(254, 250, 240, 0.30);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(40, 54, 24, 0.12),
                        inset 0 1px 0 0 rgba(255, 255, 255, 0.3);
        }
        
        .empty-state i {
            font-size: 4rem;
            color: rgba(40, 54, 24, 0.25);
            margin-bottom: 20px;
            display: block;
        }
        
        .empty-state h3 {
            color: rgba(40, 54, 24, 0.85);
            margin-bottom: 10px;
        }
        
        .empty-state p {
            color: rgba(40, 54, 24, 0.6);
            font-size: 1rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .menu-tabs { 
                border-radius: 24px; 
                padding: 15px;
                gap: 10px;
            }
            .tab-link { 
                padding: 10px 20px; 
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Page Loader -->
    <div class="page-loader">
        <div class="loader-spinner"></div>
    </div>

    <%- include('../partials/header') %>

    <!-- Page Header - Hero Section -->
    <div class="page-header">
        <div class="container text-center">
            <h1 class="page-title">Thực Đơn Catfe</h1>
            <p class="page-subtitle">
                <i class="fas fa-mug-hot"></i> 
                Khám phá hương vị đậm đà bản sắc Việt
            </p>
        </div>
    </div>

    <!-- Menu Content -->
    <div class="container mb-3">
        <!-- Filter Tabs - Floating Glass -->
        <div class="menu-tabs">
            <a href="/thuc-don" 
               class="tab-link <%= (!currentCat) ? 'active' : '' %>">
               <i class="fas fa-th"></i> Tất cả
            </a>
            
            <a href="/thuc-don?cat=1" 
               class="tab-link <%= (currentCat == 1) ? 'active' : '' %>">
               <i class="fas fa-mug-hot"></i> Cà Phê
            </a>
            
            <a href="/thuc-don?cat=3" 
               class="tab-link <%= (currentCat == 3) ? 'active' : '' %>">
               <i class="fas fa-snowflake"></i> Freeze
            </a>

            <a href="/thuc-don?cat=2" 
               class="tab-link <%= (currentCat == 2) ? 'active' : '' %>">
               <i class="fas fa-leaf"></i> Trà
            </a>

            <a href="/thuc-don?cat=4" 
               class="tab-link <%= (currentCat == 4) ? 'active' : '' %>">
               <i class="fas fa-cookie-bite"></i> Bánh Ngọt
            </a>
        </div>

        <!-- Product Grid -->
        <div class="product-grid section-padding" style="padding-top: 0;">
            <% if (products && products.length > 0) { %>
                <% products.forEach(function(item) { %>
                    <div class="product-card">
                        <div class="card-img-wrapper">
                            <img src="<%= item.image_url %>" 
                                 alt="<%= item.name %>" 
                                 onerror="this.src='https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400&h=300&fit=crop'">
                        </div>
                        <div class="card-body">
                            <h3 class="product-title"><%= item.name %></h3>
                            <p class="product-price">
                                <%= item.price.toLocaleString('vi-VN') %> đ
                            </p>
                            
                            <button class="btn btn-primary" 
                                    onclick="orderItem('<%= item.name %>')"
                                    style="width: 100%;">
                                <i class="fas fa-shopping-cart"></i> Đặt Ngay
                            </button>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <!-- Empty State - Glass Card -->
                <div style="grid-column: 1 / -1;">
                    <div class="empty-state">
                        <i class="fas fa-coffee"></i>
                        <h3>Chưa có món trong danh mục này</h3>
                        <p>Vui lòng chọn danh mục khác hoặc quay lại sau để khám phá món mới!</p>
                        <a href="/thuc-don" class="btn btn-primary" style="margin-top: 20px;">
                            <i class="fas fa-arrow-left"></i> Xem Tất Cả Món
                        </a>
                    </div>
                </div>
            <% } %>
        </div>
    </div>

    <%- include('../partials/footer') %>

    <script>
        function orderItem(itemName) {
            // Create glass notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                z-index: 9999;
                padding: 20px 30px;
                border-radius: 16px;
                background: rgba(42, 157, 143, 0.9);
                backdrop-filter: blur(12px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                font-weight: 600;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.4s ease;
                display: flex;
                align-items: center;
                gap: 12px;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 1.5rem;"></i>
                <div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">Đã thêm vào giỏ hàng</div>
                    <div style="font-size: 1rem; font-weight: 700;">${itemName}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }
        
        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>